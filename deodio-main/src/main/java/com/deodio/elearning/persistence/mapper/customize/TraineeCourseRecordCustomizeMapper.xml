<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.deodio.elearning.persistence.mapper.customize.TraineeCourseRecordCustomizeMapper" >
  
  <resultMap id="BaseResultMap" type="com.deodio.elearning.persistence.model.TraineeCourseRecord" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 01 15:30:31 CST 2017.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="course_id" property="courseId" jdbcType="VARCHAR" />
    <result column="course_item_id" property="courseItemId" jdbcType="VARCHAR" />
    <result column="course_score" property="courseScore" jdbcType="INTEGER" />
    <result column="course_time" property="courseTime" jdbcType="INTEGER" />
    <result column="account_id" property="accountId" jdbcType="VARCHAR" />
    <result column="trainee_id" property="traineeId" jdbcType="VARCHAR" />
    <result column="create_id" property="createId" jdbcType="VARCHAR" />
    <result column="update_id" property="updateId" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="updte_time" property="updteTime" jdbcType="TIMESTAMP" />
    <result column="is_pass" property="isPass" jdbcType="INTEGER" />
    <result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
    <result column="end_time" property="endTime" jdbcType="TIMESTAMP" />
    <result column="percent_complete" property="percentComplete" jdbcType="INTEGER" />
  </resultMap>
  
  <update id="updateUncompleteCourseItemLearnInfo" parameterType="com.deodio.elearning.persistence.model.TraineeCourseRecord" >
    update 
    	t_trainee_course_record
    <set>
      <if test="courseScore != null" >
        course_score = #{courseScore,jdbcType=INTEGER},
      </if>
      <if test="courseTime != null" >
        course_time = #{courseTime,jdbcType=INTEGER},
      </if>
      <if test="updateId != null" >
        update_id = #{updateId,jdbcType=VARCHAR},
      </if>
      <if test="updteTime != null" >
        updte_time = #{updteTime,jdbcType=TIMESTAMP},
      </if>
      <if test="isPass != null" >
        is_pass = #{isPass,jdbcType=INTEGER},
      </if>
      <if test="startTime != null" >
        start_time = #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null" >
        end_time = #{endTime,jdbcType=TIMESTAMP},
      </if>
      <if test="percentComplete != null" >
        percent_complete = #{percentComplete,jdbcType=INTEGER},
      </if>
    </set>
    where 
    	course_id = #{courseId,jdbcType=VARCHAR} 
    and
      	course_item_id = #{courseItemId,jdbcType=VARCHAR}
    and
       	account_id = #{accountId,jdbcType=VARCHAR}
    and
      	trainee_id = #{traineeId,jdbcType=VARCHAR}
    and
    	is_pass != '1'
  </update>
  
  <select id="queryCourseItemLearnInfo" parameterType="com.deodio.elearning.persistence.model.TraineeCourseRecord" resultMap="BaseResultMap">
  	SELECT
  		*
  	FROM
  		t_trainee_course_record
  	<where>
  		course_id = #{courseId,jdbcType=VARCHAR} 
    and
      	course_item_id = #{courseItemId,jdbcType=VARCHAR}
    and
       	account_id = #{accountId,jdbcType=VARCHAR}
    and
      	trainee_id = #{traineeId,jdbcType=VARCHAR}
  	</where>
  	LIMIT 1
  </select>
</mapper>